# è®€ã€Šå¤§è©±è¨­è¨ˆæ¨¡å¼ã€‹

> èµ·æºï¼š2020.12.10 é€±å››åœ¨å¯å¯é ­ Bob è·Ÿ Allen èŠå¤©ã€‚å…©å€‹äººç„¦æ…®æ„Ÿéƒ½å¾ˆé‡ï¼Œè¨è«–äº†ä¹‹å¾Œé¸äº†å…©å€‹äººéƒ½æœ‰çš„ã€Šå¤§è©±è¨­è¨ˆæ¨¡å¼ã€‹ï¼Œæ±ºå®šä¾†å¼„é€™å€‹è®€æ›¸å…±ç­†ç­†è¨˜ã€‚åˆå› ç‚ºæ›¸çš„ç¯‡ç« å‰›å¥½æ˜¯ 30 ç« ï¼Œé‚£ä½•ä¸å°±è‡ªå·±ä¾†ç© IT éµäººã€‚XDD æœ‰äº† 2019 å¹´çš„ç¶“é©—ï¼Œæˆ‘è¦ºå¾—è¨­è¨ˆæ¨¡å¼é€™ç¨®æ›¸æ˜¯éœ€è¦è·‘å®Œä¸€è¼ªä¹‹å¾Œå†è·‘ä¸€æ¬¡ã€‚ä¸€æ–¹é¢å…¨éƒ¨æ¨¡å¼éƒ½ééä¸€æ¬¡ä¹‹å¾Œå¯èƒ½æœƒæ¯”è¼ƒæ¸…æ¥šä¹‹å‰çœ‹éçš„æ¨¡å¼åœ¨è¬›ä»€éº¼æ±è¥¿ã€äºŒæ–¹é¢å†åŠ æ·±ä¸€æ¬¡å°é€™äº›æ¨¡å¼åœ¨è…¦æµ·ä¸­çš„å°è±¡ã€‚ç•¢ç«Ÿè¨­è¨ˆæ¨¡å¼å±¬å…§åŠŸï¼Œå‡¡æ˜¯ç‰©ä»¶å°å‘èªè¨€çš†é€šç”¨ã€‚

> Phase 2 éœ€è¦ç‚ºæ¯å€‹æ¨¡å¼æ‰¾å…©å€‹ä»¥ä¸Šçš„å…·é«”ä½¿ç”¨æƒ…å¢ƒï¼Œé‚„æœ‰æŠŠæ¨¡å¼ä¹‹é–“çš„ç›¸ä¼¼æ€§æå‡ºæ¯”è¼ƒã€å­¸ç¿’ä½¿ç”¨ UML åœ–ç•«å‡ºä¾†ã€‚é€™æ¨£å¯ä»¥å¹«åŠ©ç¬¬ä¸€æ¬¡å­¸ç¿’æ™‚ï¼ˆéäº†ä¸€é™£å­æ²’æœ‰æ‘¸åˆçªç„¶å›ä¾†çœ‹ï¼‰å¿«é€Ÿé€²å…¥ç‹€æ³ï¼Œäº†è§£æ¨¡å¼çš„ç”¨é€”èˆ‡å„ªé»èˆ‡æ¯”è¼ƒã€‚[Cocoa Design Patterns](https://developer.apple.com/library/archive/documentation/Cocoa/Conceptual/CocoaFundamentals/CocoaDesignPatterns/CocoaDesignPatterns.html)

[![](https://i.imgur.com/viVhZsl.png)](https://www.tenlong.com.tw/products/9789866761799)

## é–±è®€é€²åº¦æ’å®šè¨ˆç•«

| ch | Title      | Date | ğŸ‘€ | ch | Title | Date | ğŸ‘€ | ch | Title | Date | ğŸ‘€ |
|---:|------------|------|----|----|-------|------|----|----|-------|------|----|
|  1 | ç°¡å–®å·¥å»     | =Dec.12 | âœ… 	| 11 | *ç‹„ç±³ç‰¹æ³•å‰‡* | Dec.22 | âœ…    | 21 | ~~å–®ä¾‹æ¨¡å¼~~ | =Jan.01 | ğŸ‘€ | 
|  2 | ç­–ç•¥æ¨¡å¼â­ï¸  | =Dec.13 | âœ… 	| 12 | ~~å¤–è§€æ¨¡å¼~~ | Dec.23 | âœ…	| 22 | æ©‹æ¥æ¨¡å¼    | =Jan.02 | ğŸ‘€ | 
|  3 | *å–®ä¸€è·è²¬*   | Dec.14 | âœ… 	| 13 | å»ºé€ è€…æ¨¡å¼ğŸ‘º | Dec.24 | ğŸ‘€	| 23 | å‘½ä»¤æ¨¡å¼ğŸ‘º  | =Jan.03 |    | 
|  4 | *é–‹æ”¾å°é–‰*   | Dec.15 | âœ… 	| 14 | è§€å¯Ÿè€…æ¨¡å¼   | Dec.25 | âœ… 	| 24 | è·è²¬éˆæ¨¡å¼ | Jan.04 | ğŸ‘€ | 
|  5 | *ä¾è³´åè½‰*   | Dec.16 | âœ… 	| 15 | æŠ½è±¡å·¥å» ğŸ‘º  | =Dec.26 |    	| 25 | ä»²ä»‹è€…æ¨¡å¼ | Jan.05 | ğŸ‘€ | 
|  6 | è£é£¾æ¨¡å¼     | Dec.17 | âœ… 	| 16 | ç‹€æ…‹æ¨¡å¼â­ï¸  | =Dec.27 | âœ…   	| 26 | äº«å…ƒæ¨¡å¼  | Jan.06 | ğŸ‘€ | 
|  7 | ä»£ç†æ¨¡å¼     | Dec.18 | âœ… 	| 17 | è½‰æ¥å™¨æ¨¡å¼  | Dec.28 | âœ…   	| 27 | ~~è§£è­¯å™¨æ¨¡å¼~~ | Jan.07 | ğŸ‘€ | 
|  8 | å·¥å» æ–¹æ³•     | =Dec.19 | âœ… 	| 18 | å‚™å¿˜éŒ„æ¨¡å¼  | Dec.29 | ğŸ‘€   	| 28 | ~~è¨ªå•è€…æ¨¡å¼~~ | Jan.08 | ğŸ‘€ | 
|  9 | ~~åŸå‹æ¨¡å¼~~ | =Dec.20 | âœ… 	| 19 | çµ„åˆæ¨¡å¼    | Dec.30 | ğŸ‘€   	| 29 | æ¨¡å¼ç¸½çµ  | =Jan.09 |    | 
| 10 | ~~ç¯„æœ¬æ¨¡å¼~~ | Dec.21 | âœ…	| 20 | ~~è¿­ä»£å™¨æ¨¡å¼~~ | Dec.31 | ğŸ‘€  | 30 | é™„éŒ„ï¼¡    | =Jan.10 |    | 



## ç°¡å–®å·¥å»  + UML (p.02~22)

- ç”¨æ´»ç‰ˆå°åˆ·ä¾†è§£é‡‹ç‰©ä»¶å°å‘å°è®ŠåŒ–çš„é©æ‡‰æ€§
    1. åªæƒ³è®Šæ›´å…¶ä¸­çš„å¹¾å€‹å­—  -> å¯ç¶­è­·
    2. å°ç« ä¹‹å¾Œé‚„å¯ä»¥é‡è¤‡ä½¿ç”¨ -> å¯è¤‡ç”¨
    3. ç”¢å“è‡¨æ™‚è¦å¤šåŠ å¹¾å€‹å­—  -> å¯æ“´å±•
    4. æ°´å¹³æ’åˆ—è®Šæ›æˆå‚ç›´æ’åˆ— -> éˆæ´»æ€§å¥½
- ç°¡å–®å·¥å» é€™é‚Šä½¿ç”¨ Lisko åŸå‰‡ï¼ˆå­é¡å¿…å®šå¯¦ç¾çˆ¶é¡çš„æ–¹æ³•ï¼‰ï¼Œç•¶ç„¶ä¹Ÿå¯å°‡åŸºç¤é¡åˆ¥æ”¹ç‚º protocol è®Šæˆä¾è³´æ–¼ä»‹é¢

```swift
// åŸºç¤é¡åˆ¥
class Operation {
    func getResult(_ num1: Double, _ num2: Double) -> Double { return 0 }
}
// åŠ æ³•é‹ç®—
class OperationAdd: Operation {
    override func getResult(num1: Double, num2: Double) { num1 + num2 }
}
// ç°¡å–®å·¥å» 
class OperationFactory {
    func create(_ operate: String) -> Operation {
        switch operate {
            case "+": 
                return OperationAdd()
            case "-": 
                return OperationSub()
            ...
        }
    }
}
```

- *ä»‹é¢* èˆ‡ *å¯¦ä½œä»‹é¢çš„é¡åˆ¥* ä½¿ç”¨ç©ºå¿ƒä¸‰è§’å½¢+è™›ç·šç®­é ­æŒ‡å‘ **ä»‹é¢**ï¼ˆä¹Ÿå¯ç”¨æ£’æ£’ç³–æ¨™è¨˜æ³•
- *ç¥–å…ˆé¡åˆ¥* èˆ‡ *å­ä»£é¡åˆ¥* ä½¿ç”¨ç©ºå¿ƒä¸‰è§’å½¢+å¯¦ç¾ç®­é ­æŒ‡å‘ **ç¥–å…ˆé¡åˆ¥**
- *è¢«ä¾è³´é¡åˆ¥* èˆ‡ *ä¾è³´é¡åˆ¥* ä½¿ç”¨å¯¦å¿ƒä¸‰è§’å½¢+å¯¦ç¾ç®­é ­æŒ‡å‘ **è¢«ä¾è³´é¡åˆ¥**

![](https://i.imgur.com/rEt5Y3v.jpg)


## ç­–ç•¥æ¨¡å¼ Strategy Pattern (p.24~40)

> é¡åˆ¥çš„åŠƒåˆ†æ˜¯ç‚ºäº†å°è£ï¼Œä½†åˆ†é¡çš„åŸºç¤æ˜¯æŠ½è±¡ï¼Œå…·æœ‰ç›¸åŒå±¬æ€§å’ŒåŠŸèƒ½ä¹‹ç‰©ä»¶çš„æŠ½è±¡é›†åˆæ‰æ˜¯é¡åˆ¥ã€‚

- ç‰¹åƒ¹æ˜¯åŸåƒ¹ç¶“æŠ˜æ‰£é‹ç®—å¾Œçš„åƒ¹æ ¼ï¼Œæ‰€ä»¥æŠ˜æ‰£äº‹å¯¦ä¸Šå°±åªæ˜¯ä¸€ç¨®æ¼”ç®—æ³•
- æ¼”ç®—æ³•å¯ä»¥æŠŠå®ƒæƒ³æˆæ˜¯ä¸€ç¨®ç­–ç•¥ï¼Œä¸åŒç­–ç•¥å¯ä»¥å¥—å‡ºä¸åŒçš„åƒ¹æ ¼ï¼Œè–èª•ç¯€åƒ¹æ ¼ã€é€±å¹´æ…¶åƒ¹æ ¼...
- é‡è¦çš„æ˜¯é€™äº›æ¼”ç®—æ³•æ˜¯éš¨æ™‚å¯æ›¿æ›çš„ï¼Œé€™æ˜¯è®ŠåŒ–é»ï¼Œæ˜¯æˆ‘å€‘å¸Œæœ›é€éç‰©ä»¶å°å‘çš„å¤šå‹ä¾†åšå‹•æ…‹æ›¿æ›çš„éƒ¨åˆ†

```swift
protocol CashStrategy {
    func getNewPrice(origin: Double) -> Double
}
// æ­£å¸¸æ”¶è²»
class NormalStrategy: CashStrategy {
    func getNewPrice(origin: Double) -> Double { origin }
}
// æ‰“ä¹æŠ˜ã€æ‰“å…«äº”æŠ˜ã€æ‰“ä¸ƒæŠ˜...
class RebateStrategy: CashStrategy {
    var rebateValue: Double
    func getNewPrice(origin: Double) -> Double { origin * rebateValue }
}
// æ»¿åƒé€ç™¾ã€æ»¿å…©åƒé€äº”ç™¾...
class AbcStrategy: CashStrategy {
    // TODO: ...
}
```

![](https://i.imgur.com/ILN5myH.jpg)


## å–®ä¸€è·è²¬åŸå‰‡ Single Responsibility Pinciple (p.42~47)

> å°±ä¸€å€‹é¡åˆ¥è€Œè¨€ï¼Œæ‡‰è©²åƒ…æœ‰ä¸€å€‹å¼•èµ·ä»–è®ŠåŒ–çš„åŸå› 

- æˆ‘å€‘è¨­è¨ˆç¨‹å¼æ™‚ï¼Œå¾ˆè‡ªç„¶åœ°æœƒçµ¦ä¸€å€‹é¡åˆ¥åŠ ä¸Šå„å¼å„æ¨£çš„åŠŸèƒ½ï¼Œé€™æ„å‘³ç„¡è«–ä»»ä½•éœ€æ±‚è¦æ›´æ”¹ï¼Œéƒ½é ˆè¦æ›´æ”¹é€™å€‹å¤§é›œç‡´é¡åˆ¥ã€‚ç¶­è­·éº»ç…©ã€è¤‡ç”¨ä¸å¯èƒ½ã€æ²’æœ‰éˆæ´»æ€§ã€æ”¹æ±å£è¥¿ã€ç”Ÿæ´»ä¸€åœ˜ç³Ÿ ~~ï¼ˆè·Ÿä½ çš„äººç”Ÿä¸€æ¨£ï¼‰~~ ã€‚
- å¦‚æœä¸€å€‹é¡åˆ¥æ‰¿æ“”çš„è·è²¬éå¤šï¼Œå°±ç­‰æ–¼æ˜¯æŠŠé€™äº›è·è²¬è€¦åˆåœ¨ä¸€èµ·ã€‚ç•¶ä¸€å€‹è·è²¬çš„è®ŠåŒ–å¯èƒ½æœƒå‰Šå¼±æˆ–è€…æŠ‘åˆ¶é€™å€‹é¡åˆ¥å®Œæˆå…¶ä»–è·è²¬çš„èƒ½åŠ›ï¼Œå°±æ˜¯è€¦åˆéé«˜å°è‡´è„†å¼±çš„è¨­è¨ˆã€‚
- ç•¶è®ŠåŒ–ç™¼ç”Ÿæ™‚ï¼Œæœƒæœ‰æ„æƒ³ä¸åˆ°çš„ç ´å£ã€‚æ‰¾å‡ºå“ªäº›æ˜¯ä»‹é¢ã€å“ªäº›æ˜¯éŠæˆ²é‚è¼¯ï¼Œç„¶å¾Œé€²è¡Œåˆ†é›¢ã€‚
- è»Ÿé«”è¨­è¨ˆé€™ä»½å·¥ä½œçœŸæ­£è¦åšçš„è¨±å¤šå…§å®¹ï¼Œå°±æ˜¯å»é‡æ¸…è·è²¬ä¸¦æŠŠé‚£äº›ä¸ç›¸å¹²çš„è·è²¬ç›¸äº’åˆ†é›¢ã€‚
- ~~å¦‚æœä½ èƒ½æƒ³åˆ°å¤šæ–¼ä¸€å€‹çš„å‹•æ©Ÿå»æ”¹è®Šä¸€å€‹é¡åˆ¥ï¼Œé‚£éº¼é€™å€‹é¡åˆ¥å°±æœ‰å¤šæ–¼ä¸€å€‹è·è²¬ã€‚ï¼ˆé€™å¥è©±ä¿ç•™ï¼Œå¤ªéåŸ·è‘—æ–¼é€™ä¸€é»æœƒåµæ¶ï¼‰~~


## é–‹æ”¾å°é–‰åŸå‰‡ Open-Close Pinciple (p.50~54)

- é¢å°æ–°éœ€æ±‚ï¼Œå°ç¨‹å¼çš„æ”¹å‹•æ˜¯é€éå¢åŠ ç¨‹å¼ç¢¼é€²è¡Œçš„ï¼Œè€Œä¸æ˜¯æ›´æ”¹ç¾æœ‰çš„ç¨‹å¼ç¢¼ã€‚
- æˆ‘å€‘å»ºç«‹æŠ½è±¡ä¾†éš”é›¢ä»¥å¾Œå¯èƒ½ç™¼ç”Ÿçš„åŒé¡å‹è®ŠåŒ–ï¼ˆåƒæ˜¯ç›®å‰åªæœ‰åŠ æ¸›æ³•ï¼Œæœªä¾†å¯èƒ½æœƒæœ‰ä¹˜é™¤æ³•ï¼‰ã€‚
- é€™éƒ¨åˆ†è¦æ³¨æ„çš„æ˜¯ï¼šè¶Šæ™šå¯Ÿè¦ºæ½›åœ¨çš„è®ŠåŒ–ï¼Œè¦å»ºç«‹æ­£ç¢ºçš„æŠ½è±¡å°±è¶Šå›°é›£ã€‚
- å¦‚æœåŠ æ¸›é‹ç®—éƒ½åœ¨å¾ˆå¤šåœ°æ–¹æ‡‰ç”¨äº†ï¼Œå†ä¾†è€ƒæ…®æŠ½è±¡ã€è€ƒæ…®åˆ†é›¢ï¼Œå°±æœƒå¾ˆå›°é›£ã€‚


## ä¾è³´å€’è½‰åŸå‰‡ Dependency Inverse Pinciple (p.56~64)

- CPU æŠŠä»‹é¢å®šç¾©å¥½ï¼Œå…¶å…§éƒ¨å†è¤‡é›œï¼Œåªè¦æ’ä¸Šç¬¦åˆè¦æ ¼çš„ä¸»æ©Ÿæ¿å°±å¯ä»¥å·¥ä½œã€‚
- Liskov æ›¿æ›åŸå‰‡ï¼Œä¹Ÿæ˜¯ä¸€ç¨®ä¾è³´å€’è½‰ã€‚
- å¦‚æœä½¿ç”¨äº†ä¸€å€‹çˆ¶é¡åˆ¥ï¼Œé‚£éº¼ä¸€å®šé©ç”¨æ–¼å…¶å­é¡åˆ¥ï¼Œè€Œä¸”å¯Ÿè¦ºä¸å‡ºçˆ¶é¡åˆ¥ç‰©ä»¶å’Œå­é¡åˆ¥ç‰©ä»¶çš„å€åˆ¥ï¼›ä¹Ÿå°±æ˜¯èªªï¼ŒæŠŠçˆ¶é¡åˆ¥éƒ½æ›¿æ›æ‰æˆå®ƒçš„å­é¡åˆ¥ï¼Œç¨‹å¼çš„ä¾ç„¶å¯ä»¥æ­£å¸¸é‹ä½œã€‚
- åªæœ‰ç•¶å­é¡åˆ¥æ›¿æ›æ‰çˆ¶é¡åˆ¥ï¼Œè€Œè»Ÿé«”çš„åŠŸèƒ½ä¸å—å½±éŸ¿æ™‚ï¼Œçˆ¶é¡åˆ¥æ‰èƒ½ç®—æ˜¯çœŸæ­£è¢«è¤‡ç”¨ï¼ˆï¼Ÿï¼‰ã€‚


## è£é£¾æ¨¡å¼ Decorator Pattern (p.66~83)

- å®¢æˆ¶ç«¯ç¨‹å¼ç¢¼å¯ä»¥åœ¨åŸ·è¡Œæ™‚æ ¹æ“šéœ€è¦ï¼Œæœ‰é¸æ“‡åœ°ã€æŒ‰é †åºåœ°ä½¿ç”¨è£é£¾åŠŸèƒ½åŒ…è£ç‰©ä»¶ã€‚
- ä¿è­‰è£é£¾é¡åˆ¥ä¹‹é–“å½¼æ­¤ç¨ç«‹ï¼Œé€™æ¨£å®ƒå€‘å°±èƒ½ä»¥ä»»æ„çš„é †åºé€²è¡Œçµ„åˆã€‚
- ä¸€å±¤åŒ…ä¸€å±¤ï¼Œä¸‹ä¸€å±¤åšå®Œäº‹æƒ…å¾Œï¼Œå‘¼å«ä¸Šä¸€å±¤åšäº‹ï¼ˆè·Ÿè²¬ä»»éˆæœ‰ä¸€é»åƒï¼‰ã€‚


## ä»£ç†æ¨¡å¼ Proxy Pattern (p.86~112)

> ç‚ºå…¶ä»–ç‰©ä»¶æä¾›ä¸€ç¨®ä»£ç†ï¼Œä»¥æ§åˆ¶å°é€™å€‹ç‰©ä»¶çš„å­˜å–ã€‚

1. é ç«¯ä»£ç†ï¼šéš±è—å®¢æˆ¶ç«¯çœŸæ­£å¯¦ä½œçš„å°è±¡ï¼Œæ•…è©²å°è±¡çš„æ›¿æ›ä¸æœƒå½±éŸ¿åˆ°å®¢æˆ¶ç«¯ã€‚(strategy?)
2. è™›æ“¬ä»£ç†ï¼šéœ€è¦å»ºç«‹æ¶ˆè€—å¤§é‡è³‡æºçš„æƒ…æ³ä¸‹ä½¿ç”¨ï¼Œç”¨æ–¼å­˜æ”¾å¯¦é«”åŒ–å¾ˆé•·æ™‚é–“çš„æƒ…æ³ã€‚(flyweight?)
3. å®‰å…¨ä»£ç†ï¼šç”¨æ–¼æ§åˆ¶çœŸå¯¦ç‰©ä»¶å­˜å–æ™‚çš„è¨±å¯æ¬Šã€‚
4. æ™ºæ…§åƒè€ƒï¼šä»£ç†äººå¯ä»¥å¤šåšä¸€äº›äº‹ï¼Œå®¢æˆ¶ç«¯éƒ½ä¸æœƒç™¼ç¾ã€‚

```swift
protocol IGiveGift {
    func giveDoll()
    func giveFlowers()
    func giveChocolate()
}

class Persuit: IGiveGift {
    var mm: SchoolGirl
    func giveDoll() { print(mm.name + "é€ä½ æ´‹å¨ƒå¨ƒ") }
    func giveFlowers() { print(mm.name + "é€ä½ é®®èŠ±") }
    func giveChocolate() { print(mm.name + "é€ä½ å·§å…‹åŠ›") }   
}

class Proxy: IGiveGift {
    var gg: IGiveGift   // gg ç‚ºè·å‹™ä»£ç†äºº
    func giveDoll() { gg.giveDoll() }
    func giveFlowers() { gg.giveFlowers() }
    func giveChocolate() { gg.giveChocolate() }
}
```


## å·¥å» æ–¹æ³• Factory Method (p.100~112)

- åœ¨æœ¬æ›¸ä¸­çš„ä»‹ç´¹ï¼Œã€Œç°¡å–®å·¥å» ã€èˆ‡ã€Œå·¥å» æ–¹æ³•ã€ç‚ºå…©ç¨®ä¸åŒçš„æ¨¡å¼ã€‚
- ç°¡å–®å·¥å» çš„ç‰¹è‰²ï¼šç”Ÿç”¢æ–¹æ³•ä¸­æœƒæœ‰ä¸€å€‹ switch-case åšåˆ¤æ–·ï¼Œå› ç”¢å‡ºçš„ç”¢å“çš†ç‚ºçˆ¶é¡åˆ¥çš„å­é¡åˆ¥ã€‚
- å·¥å» æ–¹æ³•çš„ç‰¹è‰²ï¼šåœ¨ç°¡å–®å·¥å» ä¹‹ä¸Šï¼Œå°‡ switch-case çš„åˆ¤æ–·å¯¦ä½œè½‰ç‚ºå®¢æˆ¶ç«¯å±¥è¡Œã€‚å³å®¢æˆ¶ç«¯éœ€è¦å…ˆç”¢ç”ŸæŒ‡å®šçš„å·¥å» ï¼Œä¸¦ä½¿ç”¨è©²å·¥å» ç”¢ç”Ÿç›®æ¨™çš„ç”¢å“ï¼Œæœ€å¾Œæ¥çºŒä½¿ç”¨ç”¢å“ã€‚
- å·¥å» æ–¹æ³•å°æ¯”ç°¡å–®å·¥å» çš„å¥½è™•åœ¨æ–¼ï¼šä¸éœ€è¦æœ‰ä¸€å€‹å¤§çš„ç°¡å–®å·¥å» åšéå¸¸å¤šçš„ç”¢å“åˆ¤æ–·ï¼Œåˆ¤æ–·çš„é‚è¼¯åœ¨å®¢æˆ¶ç«¯å¯¦ç¾ï¼Œè®“å®¢æˆ¶ç«¯æœ‰æ›´é«˜çš„è‡ªä¸»æ¬Šã€‚

```swift
protocol IFactory {
    func create() -> Operation
}
class AddFactory: IFactory {
    func create() -> Operation { OperationAdd() }
}
class SubFactory: IFactory {
    func create() -> Operation { OperationSub() }
}
class MulFactory: IFactory {
    func create() -> Operation { OperationMul() }
}
class DivFactory: IFactory {
    func create() -> Operation { OperationDiv() }
}
func main() {
    let operFactory = AddFactory()
    let oper = operFactory.create()
    oper.numberA = 2
    oper.numberB = 3 
    let result = oper.getResult()    // result = 5
}
```


## åŸå‹æ¨¡å¼ Prototype Pattern (p.114~131)

- å¯¦ä½œ ICloneable ä½¿ç‰©ä»¶å¯ä»¥åšæ·±æ‹·è²ï¼Œé †ä¾¿è¤‡ç¿’ pass by value, reference, æ·±æ‹·è², æ·ºæ‹·è²ã€‚
- é€™é‚Šè¨è«–çš„å¯¦ä½œéƒ½æ˜¯æ·±æ‹·è²ï¼Œå³ä¾¿æ˜¯æ“ä½œåƒè€ƒé¡å‹ç‰©ä»¶çš„æ‹·è²å“ä¹Ÿä¸æœƒå½±éŸ¿åˆ°åŸç‰©ä»¶çš„è³‡æ–™ã€‚
- åœ¨ iOS çš„ä¸–ç•Œï¼Œæˆ‘å€‘æœ‰ NSCopyingã€‚

```swift
protocol ICloneable {
    func clone() -> Self
}
```


## ç¯„æœ¬æ¨¡å¼ Template Pattern (p.134~146)

- é‡è¤‡ = æ˜“éŒ¯ + é›£æ”¹
- åˆ©ç”¨ç¹¼æ‰¿ç‰¹æ€§ç‚ºå­é¡åˆ¥æä¾›ç¯„æœ¬ï¼Œé€éè¦†å¯«ä¾†å¯¦ç¾å­é¡åˆ¥çš„ç‰¹å®šç”¨é€”ã€‚
- é€éç¯„æœ¬æ–¹æ³•æŠŠé€™äº›è¡Œç‚ºæ¬ç§»åˆ°å–®ä¸€çš„åœ°æ–¹ï¼Œå¹«åŠ©å­é¡åˆ¥æ“ºè„«é‡è¤‡çš„ä¸ä¾¿è¡Œç‚ºçš„ç³¾çºã€‚

```swift
class AbstractClass {
    func primitiveOperation1() {
        // sub-class should override me
    }
    func primitiveOperation2() {
        // sub-class should override me
    }
    func tmeplateMethod() {
        self.primitiveOperation1()
        self.primitiveOperation2()
    }
}

class ConcreteClassA: AbstractClass {
    overried func primitiveOperation1() {
        print("å…·é«”é¡åˆ¥ï¼¡ æ–¹æ³•1 å¯¦ç¾")
    }
    overried func primitiveOperation2() {
        print("å…·é«”é¡åˆ¥ï¼¡ æ–¹æ³•2 å¯¦ç¾")
    }
}

class ConcreteClassB: AbstractClass {
    overried func primitiveOperation1() {
        print("å…·é«”é¡åˆ¥B æ–¹æ³•1 å¯¦ç¾")
    }
    overried func primitiveOperation2() {
        print("å…·é«”é¡åˆ¥B æ–¹æ³•2 å¯¦ç¾")
    }
}
```


## ç‹„ç±³ç‰¹æ³•å‰‡ Law Of Demeter (p.148~151)

- æœ€å°‘çŸ¥è­˜åŸå‰‡ã€‚
- å¦‚æœé€™å…©å€‹é¡åˆ¥ä¸å¿…å½¼æ­¤ç›´æ¥é€šä¿¡ï¼Œé‚£éº¼é€™å…©å€‹é¡åˆ¥å°±ä¸æ‡‰ç•¶ç™¼ç”Ÿç›´æ¥çš„ç›¸äº’ä½œç”¨ã€‚
- å¦‚æœå…¶ä¸­ä¸€å€‹é¡åˆ¥éœ€è¦èª¿ç”¨å¦ä¸€å€‹é¡åˆ¥çš„æŸå€‹æ–¹æ³•çš„è©±ï¼Œå¯ä»¥é€éç¬¬ä¸‰è€…è½‰ç™¼é€™å€‹èª¿ç”¨ã€‚


## å¤–è§€æ¨¡å¼ Facade Pattern (p.154~164)

- æŠ•è³‡åŸºé‡‘æœ‰å°ˆæ¥­ç¶“ç†äººå¹«å¿™è™•ç†æŠ•è³‡çš„äº‹å‹™ï¼Œå› æ­¤ä½ åªéœ€è² è²¬æ³¨éŒ¢é€²å»å¾Œç­‰æ”¶ç›Šã€‚
- é€™é‚Šç¶“ç†äººå°±æ˜¯ Facadeï¼Œæš´éœ²æŠ•éŒ¢è·ŸåéŒ¢çš„ä¸€é¢çµ¦ä½ ã€è½‰é ­å¾Œçš„äº‹éƒ½ç”±ä»–ä¾†è™•ç†ã€‚

```swift
class Facade {
    private var sys1: SubSystem1
    private var sys2: SubSystem2
    private var sys3: SubSystem3
    private var sys4: SubSystem4
    func methodA() {
        print("ç¬¬ä¸€ç¨®æ–¹æ³•")
        sys1.foo1()
        sys2.foo2()
        sys4.foo4()
    }
    func methodB() {
        print("ç¬¬äºŒç¨®æ–¹æ³•")
        sys2.foo2()
        sys3.foo3()
    }
}
func main() {
    let facade = Facade()
    facade.methodA()
    facade.methodB()
}
```

![](https://i.imgur.com/c9Irhxh.png)







## è§€å¯Ÿè€…æ¨¡å¼ Observer Pattern (p.182~205)

- è¢«è§€å¯Ÿè€…ï¼Œæˆ‘å€‘ç¨±ç‚ºä¸»é«” subjectï¼›è§€å¯Ÿè€…ï¼Œæˆ‘å€‘ç¨±ç‚º observerã€‚
- ä¸»é«”æ¥å—åŠ å…¥ç›£è½è¨»å†Šï¼Œä¸¦æ–¼äº‹ä»¶ç™¼ç”Ÿæ™‚é€šçŸ¥é€™äº›ç›£è½è€…ã€‚

> è£œå……ï¼šä½¿ç”¨ Swift æˆ–æ˜¯ Objective-C å¯¦ç¾çš„æ™‚å€™ï¼Œéœ€æ³¨æ„ retain cycle çš„å•é¡Œã€‚

```swift
class Subject {
    private var observers: [Observer]
    func attach(newObserver: Observer) {
        observers.append(newObserver)
    }
    func detach(observer: Observer) {
        observers.remove(observer)
    }
    func notify() {
        observers.forEach({ $0.update() })
    }
}
class Observer {
    func update() {
        // è™•ç†äº‹ä»¶ç™¼ç”Ÿ
    }
}
```

- æœ¬æ›¸æäº†ä¸€å€‹åœ¨ .Net æ¡†æ¶ä¸‹çš„è§€å¯Ÿè€…å¯¦ä½œæ–¹å¼ï¼Œä»–å€‘ç¨±ä½œå§”æ´¾ Delegate-EventHandler-Update

```C#
class Boss {
    public event EventHandler Update;
    private string action;
    public void Notify() {
        Update();
    }
    public string SubjectState {
        get { return action; }
        set { action = value; }
    }
}
func main() {
    Boss hansan = new Boss();
    StockObserver tongshi1 = new StockObserver("é­äº”é›²", hansan);
    NBAObserver tongshi2 = new NBAObserver("æå¯Ÿç®¡", hansan);
    hansan.Update += new EventHandler(tonshi1.closeStockMarket);
    hansan.Update += new EventHandler(tonshi2.closeNBADirectSeed);
    hansan.SubjectState = "æˆ‘å’Œå±±å›ä¾†äº†ï¼ï¼";
    hansan.Notify();
}
```


